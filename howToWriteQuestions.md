# マテリアル内に挿入可能な問題の作問ガイドライン

Exercodeでは、以下のような問題が存在します。本資料では、マテリアル（講義資料）内に挿入可能な問題の作り方を説明します。

- 講義資料内に挿入可能な問題
  - 単一選択式
  - 複数選択式
  - 記述式
- 講義資料からリンクを張る問題
  - コーディング問題
  - タートルグラフィックス問題

## 問題形式と問題の種類

問題形式には、単一選択式・複数選択式・記述式の3種類が存在しています。
一般的に、これらの3種類を活用して、知識問題とコードトレース問題を作問します。
以下に問題形式と問題の種類の関係を示します。

- 知識問題: 学習者の知識を問う問題です。単一選択式・複数選択式・記述式のいずれかを使います。
- コードトレース問題: プログラムの出力結果を問う問題です。単一選択式または記述式を使います。

## 問題形式ごとの作問方法

問題を作成するには、チルダ3文字(`~~~`)から構成される`yaml question`のコードブロックを作ります。
バッククォートでなくチルダ3文字（`~~~`）である点に注意してください。
`yaml`の後にスペース区切りで`question`を追記する必要がある点に注意してください。
なお、問題のコードブロックは講義資料中のどこにでも記載できます。

どの問題も、`id`（各資料内でユニークなID）, `type`（問題形式）, `question`（問題文）の設定項目が必要です。
さらに、問題形式ごとに以下の設定項目が必要です。ただし、これ以外の設定項目を使わないでください。

- 単一選択式 (`type: 'select'`)
  - `options`: 選択肢（文字列）のリストを記載します。
  - `answerIndex`: 正解のインデックス（0始まり）を数値で指定します。もし、複数の選択肢のいずれも正解としたい場合は、数値の配列を指定します。
- 複数選択式 (`type: 'select_multiple'`)
  - `options`: 選択肢（文字列）のリストを記載します。
  - `answerIndices`: 正解のインデックス（0始まり）を数値の配列で指定します。
- 記述式 (`type: 'text'`)
  - `answerPattern`: 正解の正規表現パターンを指定します。HTMLの`pattern`属性と同様に、パターンの始めに`^(?:`が、終わりに`)$`が含まれているかのように扱われます。
  - `modelAnswer`: 模範解答を指定します。

`options`の各要素を文字列にする必要があるため、エスケープ文字やシングルクォートを含まない場合は、シングルクォートで囲ってください。

いずれの問題形式でも、追加で以下の項目を設定することができます。（設定しなくても構いません。）

- `resubmittable`: 再提出可能か否かを示します。小テストなどの試験問題では、試験が終わるまでは解答内容を変更できるように `true` を設定すべきです。
- `explanation`: 解説を記載できます。模範解答を表示するタイミングで、一緒に表示されます。
- `hint`: ヒントを記載できます。ヒントは、復習機能で復習する時だけ表示されます。

### 基本的な問題例

以下に必須項目のみで構成された4つの基本的な問題例を示します。

~~~yaml question
id: 'q1'
type: 'select'
question: |
  Pythonなどのプログラミング言語において加算を表す演算子を、次の選択肢から1つ選びなさい。
options:
  - '+'
  - '++'
  - '-'
  - '--'
answerIndex: 0
~~~

~~~yaml question
id: 'q2'
type: 'select_multiple'
question: |
  Pythonにおいて加算演算子よりも優先順位が高い（先に演算される）演算子を、次の選択肢からすべて選びなさい。
options:
  - '**'
  - '*'
  - '/'
  - '%'
  - '<'
answerIndices:
  - 0
  - 1
  - 2
  - 3
~~~

~~~yaml question
id: q3
type: text
question: |
  次のソースコードの`sum`は引数`a`と`b`の和を返す関数である。
  ①にあてはまる式を答えなさい。

  ```py
  def sum(a, b):
      return ①
  ```
answerPattern: a\s*\+\s*b
modelAnswer: a + b
~~~

~~~yaml question
id: 'tracing_questions_q1'
type: 'select'
question: |
  次のプログラムを実行した際の出力結果を選びなさい。
  ```python
  x = 4
  y = 0
  if x >= 5:
      y = 1
  else:
      y = 2
  print(y)
  ```
options:
  - '0'
  - '1'
  - '2'
  - '3'
answerIndex: 2
~~~

### ヒントと解説付きの問題例

以下に必須項目のみで構成された4つの基本的な問題例を示します。

~~~yaml question
id: select_purpose_alt
type: select
question: |
  SQLの`SELECT`文において、`SELECT`句の主な役割は何ですか？正しいものを1つ選びなさい。
options:
  - 取得したい列（カラム）を指定する
  - データを取得するテーブルを指定する
  - 取得する行を絞り込む条件を指定する
  - 取得結果の並び順を指定する
answerIndex: 0
resubmittable: true
explanation: |-
  SQLの`SELECT`文は、データベースから情報を取得するための基本的な命令です。`SELECT`文はいくつかの句（clause）で構成されており、それぞれが特定の役割を持っています。

  *   **`SELECT`句**: この句は、結果として表示したい**列（カラム）**を指定します。どの列のデータを取得したいかを`SELECT`の後ろに列挙します。例えば、`SELECT name, age`と書くと、`name`列と`age`列のデータを取得します。`SELECT *`と書くと、すべての列を取得します。
  *   **`FROM`句**: この句は、データを取得する**テーブル**を指定します。どのテーブルからデータを取得するかを指定します。例: `FROM users`
  *   **`WHERE`句**: この句は、取得する**行を絞り込むための条件**を指定します。特定の条件に一致する行だけを取得したい場合に使います。例: `WHERE age > 20`
  *   **`ORDER BY`句**: この句は、取得した結果の**並び順**を指定します。特定の列の値に基づいて昇順（ASC）または降順（DESC）に並べ替えることができます。例: `ORDER BY age DESC`

  質問は`SELECT`句の主な役割について尋ねています。上記の通り、`SELECT`句は**取得したい列（カラム）を指定する**役割を担います。

  したがって、選択肢の中で`SELECT`句の主な役割を正しく説明しているのは「取得したい列（カラム）を指定する」です。他の選択肢は、それぞれ`FROM`句、`WHERE`句、`ORDER BY`句の役割を説明しています。
hint: |-
  基礎知識:
  - SQLの`SELECT`文は、データベースからデータを取得するために使われる基本的な命令です。
  - `SELECT`文は、いくつかの異なる役割を持つ「句」（clause）と呼ばれる部分から構成されています。

  応用知識:
  - `SELECT`文を構成する主な句には、`SELECT`句、`FROM`句、`WHERE`句、`ORDER BY`句などがあり、それぞれが特定の機能（どのテーブルから、どの行を、どの列を、どの順序で取得するかなど）を担当します。
  - `SELECT`句は、最終的に取得したいデータの「何を」表示するかを指定する部分です。

  解き方:
  - `SELECT`文の基本的な書き方（例: `SELECT 列名 FROM テーブル名 WHERE 条件`）を思い出してください。`SELECT`というキーワードのすぐ後に書かれる情報は何でしょうか？
  - 各選択肢が説明している内容（列の指定、テーブルの指定、行の絞り込み、並び順の指定）が、`SELECT`文のどの句の役割に対応するのかを考え、`SELECT`句の役割として最も適切なものを選びましょう。
~~~